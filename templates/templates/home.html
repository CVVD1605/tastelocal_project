{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="container mt-5 text-center">
  <h1 class="mb-4">Search for food experience</h1>

  <form method="GET" action="{% url 'search-results' %}">
    <input type="text" name="search" class="form-control w-50 d-inline" placeholder="Search" />
    <button type="submit" class="btn btn-outline-primary">ğŸ”</button>
  </form>

  <!-- ğŸ”¹ Explore by -->
  <div class="mt-5">
    <h4>Explore by</h4>
    <div class="d-flex justify-content-center gap-3 mt-3">
      <a href="{% url 'search-results' %}?cuisine=Local" class="btn btn-info">Cuisine</a>
      <a href="{% url 'search-results' %}?nearby=true" class="btn btn-info">Nearby Me</a>
      <a href="{% url 'search-results' %}?rating=4&sort=top" class="btn btn-info">Top Rated</a>
      <a href="{% url 'search-results' %}?sort=new" class="btn btn-info">New Listings</a>
    </div>
  </div>

  <!-- ğŸ”¹ Featured Vendors -->
  <div class="mt-5">
    <h4>Featured Vendors</h4>
    <div class="row mt-3">
      {% for vendor in featured_vendors %}
      <div class="col-md-4">
        <div class="card h-100 position-relative">
          <span class="badge bg-warning text-dark position-absolute top-0 start-0 m-2">ğŸŒŸ Featured</span>

          {% if vendor.photo %}
            <img src="{{ vendor.photo.url }}" class="card-img-top object-fit-cover" style="height:150px;" alt="{{ vendor.business_name }}">
          {% elif vendor.food_items.first.image %}
            <img src="{{ vendor.food_items.first.image.url }}" class="card-img-top object-fit-cover" style="height:150px;" alt="{{ vendor.business_name }}">
          {% else %}
            <img src="{% static 'images/placeholder.png' %}" class="card-img-top object-fit-cover" style="height:150px;" alt="Vendor Image">
          {% endif %}

          <div class="card-body">
            <h5 class="card-title">{{ vendor.business_name }}</h5>
            <a href="{% url 'vendor-detail' vendor.pk %}" class="btn btn-sm btn-outline-primary">View</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- ğŸ”¹ CTA -->
  <div class="mt-5">
    <h4>Why TasteLocal?</h4>
    <p>Authentic food experiences. <br> Support small local vendors. <br> Curated, trusted reviews.</p>

    <div class="d-flex justify-content-center gap-4 mt-3">
      <a href="{% url 'register' %}?role=tourist" class="btn btn-danger">Join as Tourist</a>
      <a href="{% url 'register' %}?role=vendor" class="btn btn-danger">Join as Vendor</a>
    </div>
  </div>
</div>
{% endblock %}
